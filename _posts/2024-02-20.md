---
title: "[iOS - Swift] TTS ë°œìŒ ì´ìŠˆ í•´ê²°"
date: 2024-02-20 9:00:00 +09:00
categories: [iOS, Swift]
tags: [swift, ios, swiftui, widgetkit] 
---

## ë“¤ì–´ê°€ê¸° ì „ì—

&nbsp;

Hi ğŸ‘‹ğŸ»  

ì˜¤ëŠ˜ì€ êµ¬ê¸€ë§í•´ë„ ì˜ ë‚˜ì˜¤ì§€ ì•Šë˜.. **TTS ê¼¬ë¶€ë‘ë§ ì‚¬ê±´**ì— ëŒ€í•´ì„œ ë‚¨ê²¨ë³´ê² ìŠµë‹ˆë‹¤.

&nbsp;

ğŸ¤” ***TTS ê¼¬ë¶€ë‘ë§ ì‚¬ê±´**ì´ ë¬´ì–´ëƒ..?*

&nbsp;

ë‚´ê°€ ë§Œë“  ë§ì´ê³ ..  

ì´ ì‚¬ê±´ì€ **ì•± ë‚´ì—ì„œ ì–¸ì–´ ì„¤ì •ì„ ë°”ê¾¸ë©´** TTSì— ê¼¬ë¶€ë‘ë§ì´ ë‚˜ì˜¤ê²Œ ë˜ì–´ ìƒê¸´ íŠ¸ëŸ¬ë¸”...ì…ë‹ˆë‹¤.

&nbsp;

ëª¬ì†Œë¦¬ëƒêµ¬ìš”...?

&nbsp;

***

## ë°œë‹¨

&nbsp;

ì´ë²ˆì— í”„ë¡œì íŠ¸ì—ì„œ í…ìŠ¤íŠ¸ ë¶€ë¶„ì— localizing ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©°,  

TTSê°€ ë“¤ì–´ê°€ëŠ” ë¶€ë¶„ ë˜í•œ í•¨ê»˜ ì§„í–‰í•˜ê²Œ ë˜ì—ˆëŠ”ë°ìš”. 

&nbsp;

<img src = "https://github.com/dlwogus0128/swift-example/assets/79050615/d6a02a06-d78a-4211-ac29-3bc1efd3dd41" alt = "">

<center>ì–¸ì–´ ì„¤ì • ë²„íŠ¼... (ê°„ë‹¨í•˜ê²Œ ã…‹)</center>

&nbsp;

ê·¸ëŸ°ë°, ì´ì „ë¶€í„° ê³ ì§ˆì ìœ¼ë¡œ ì•±ì„ ì™„ì „íˆ ë‚˜ê°”ë‹¤ê°€ ë“¤ì–´ì˜¤ì§€ ì•ŠëŠ” ì´ìƒ,  

ì•± ë‚´ì—ì„œ ì–¸ì–´ ì„¤ì •ì„ ë³€ê²½í•˜ë©´ TTS ë°œìŒì´ ì´ìƒí•˜ê²Œ ê¼¬ì´ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. 

(ê°™ì´ ê°œë°œ ì¤‘ì´ë˜ ì•ˆë“œë¡œì´ë“œë„ ê·¸ëŸ¬ë˜ë°... ê°™ì€ ì´ìœ ì¼ê¹Œìš”??)

&nbsp;

ì„¤ëª…í•˜ê¸° ì–´ë ¤ìš´ë°... ì•½ê°„ ì›ì–´ë¯¼ì´ í•œêµ­ì–´ ë§í•˜ë“¯, í•œêµ­ ì‚¬ëŒì´ ì½©ê¸€ë¦¬ì‹œë¡œ ì˜ì–´ ë§í•˜ë“¯..?

&nbsp;

***

## í•´ê²°!

&nbsp;

ê²°ë¡ ì ìœ¼ë¡œ TTSì—ì„œëŠ” LanguageCodeë¥¼ ë„˜ê²¨ì¤„ ë•Œ BCP47 ì½”ë“œì— ë§ì¶”ì–´, í•´ë‹¹ ì½”ë“œ ì „ì²´ë¥¼ ë‹¤ ì…ë ¥í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ì—ˆìŠµë‹ˆë‹¤. 

&nbsp;

BCP47ì´ ë¨¸ë‚˜ìš”?

<img src = "https://github.com/dlwogus0128/swift-example/assets/79050615/3e530fc3-9fe9-4417-bb45-b05cd1d1decd" alt = "">

&nbsp;

ì¸í„°ë„· ë‚´ì—ì„œ ì¸ê°„ë“¤ì´ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ë¥¼ íŠ¹ì •ì§“ëŠ” í‘œì¤€ ì½”ë“œ! ë¼ë„¤ìš¥



```swift
let language = UserDefaults.standard.array(forKey: "AppleLanguages")?.first as! String // ì´ˆê¸°ì— "ko-KR" , "en-KR" ë“±ìœ¼ë¡œ ì €ì¥ë˜ì–´ìˆìŒ
let index = language.index(language.startIndex, offsetBy: 2)
let languageCode = String(language[..<index]) //"ko" , "en" ë“±
let path = Bundle.main.path(forResource: languageCode, ofType: "lproj")
guard let bundle = Bundle(path: path!) else { return Bundle() }
return bundle
```

&nbsp;

ì´ ë¬¸ì œë¥¼ í•´ê²°í–ˆëŠ”ë°, TTSì—ì„œëŠ” LanguageCodeë¥¼ ë„˜ê²¨ì¤„ ë•Œ BCP47 ì½”ë“œì— ë§ì¶”ì–´, í•´ë‹¹ ì½”ë“œ ì „ì²´ë¥¼ ë‹¤ ì…ë ¥í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ì—ˆìŠµë‹ˆë‹¤. 

ë‹¤ì‹œ ë§í•´, ì˜ˆë¥¼ ë“¤ì–´ â€œen-USâ€ ë°œìŒìœ¼ë¡œ TTSë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.  ì €í¬ ì¼ë°˜ í…ìŠ¤íŠ¸ localizationì˜ ê²½ìš° ì•ì˜ â€œenâ€ë§Œ íŒŒì‹±í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. í…ìŠ¤íŠ¸ëŠ” ì‚¬íˆ¬ë¦¬ë¥¼ ì“°ë“ , ë°œìŒì´ ì´ìƒí•˜ë“  ëª¨ë‘ ê°™ì€ í…ìŠ¤íŠ¸ì´ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 

<img src = "https://github.com/dlwogus0128/swift-example/assets/79050615/857de8ba-56d7-4a66-bc13-c4ac91498c59" alt = "">

BCP47 Language Code

ê·¸ëŸ¬ë‚˜ ë°œìŒì—ëŠ” ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ì˜ì–´ë§Œ ì‚´í´ë³´ì•„ë„ 5ê°€ì§€ë‚˜ ë˜ëŠ”ë°, ì´ ë•Œ ë’·ìë¦¬ ëŒ€ë¬¸ìë¡œ ëœ ì§€ì—­ëª…ê¹Œì§€ ëª…ì‹œí•´ì£¼ì§€ ì•Šìœ¼ë©´ ì´ìƒí•œ ë°œìŒìœ¼ë¡œ ë‚˜ì˜¤ê²Œ ë©ë‹ˆë‹¤. 

ì´ ì ì„ ë°œê²¬í•˜ê³  

```swift
public var currentLanguageCode: String = Locale.current.languageCode!
```

ë¼ëŠ” ì „ì—­ë³€ìˆ˜ë¥¼ ì„¤ì •í•´, í•´ë‹¹ ë³€ìˆ˜ì— í˜„ì¬ languageCodeë¥¼ ì €ì¥í•˜ë„ë¡ í•´ë‘ì—ˆìŠµë‹ˆë‹¤. (ocale.current.languageCode!ëŠ” ì´ˆê¸° ì•±ì„ ì¼°ì„ ë•Œ ì–¸ì–´ ì„¤ì •ê°’ì„ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•¨) 

```swift
func play(_ string: String){
    let utterance = AVSpeechUtterance(string: string)
    var bcp47LanguageCode: String = String()
    
    switch currentLanguageCode {
    case "ko":
        bcp47LanguageCode = "ko-KR"
    case "en":
        bcp47LanguageCode = "en-US"
    case "fr":
        bcp47LanguageCode = "fr-FR"
    case "ja":
        bcp47LanguageCode = "ja-JP"
    case "zh-Hans":
        bcp47LanguageCode = "zh-Hans"
    default:
        bcp47LanguageCode = "ko-KR"
    }
    
    utterance.voice = AVSpeechSynthesisVoice(language: bcp47LanguageCode)
    utterance.rate = 0.5
    synthesizer.stopSpeaking(at: .immediate)
    synthesizer.speak(utterance)
}
```

TTSë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ play(:) í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´, íŒŒì‹±ëœ code ê°’ì— ë”°ë¼ì„œ ì €í¬ê°€ ì›í•˜ëŠ” í‘œì¤€ ë°œìŒìœ¼ë¡œ BCP47 ì½”ë“œê°’ì„ ë„˜ê²¨ì£¼ê²Œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

(zh-Hans, ì¤‘êµ­ì–´ë§Œ ë‘ ìë¦¬ê°€ ì•„ë‹Œ ì „ì²´ ì½”ë“œë¥¼ ì“°ëŠ” ì´ìœ ëŠ”, ì¤‘êµ­ì–´ê°€ í‘œê¸° ìƒì—ì„œë„ ê°„ì²´ì™€ ì¼ë°˜ìœ¼ë¡œ êµ¬ë¶„ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.)

```swift
TTSManager.shared.play(languageManager.setTextWithLanguage(bundle: bundle, forKey: LanguageLiterals.debug))
```

TTSëŠ” ìœ„ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.





ì°¸ê³ 

(https://appmakers.dev/bcp-47-language-codes-list/)